<mat-toolbar color="primary">
  <span>CalendarSome</span>

</mat-toolbar>
<div style="width: 300px;display: flex">
  <mat-form-field>
    <mat-label>Choose an option</mat-label>
    <mat-select [(ngModel)]="view">
      <mat-option value="day">day</mat-option>
      <mat-option value="month">Month</mat-option>
    </mat-select>
  </mat-form-field>
  <button mat-stroked-button (click)="onAddEventClicked()">Add Event <mat-icon>add</mat-icon></button>
</div>
<div style="text-align: center; margin: 20px;display: flex">
  <mat-calendar [(selected)]="selectedDate" (selectedChange)="view='day'"
                style="padding:20px;width: 300px;height: 300px;flex: 2"></mat-calendar>
  <ng-container *ngIf="view==='day'">
    <div class="day-view-container" style="flex:8;position:relative;" cdkDropListGroup >
      <mat-list>
        <ng-container *ngFor="let slot of timeSlots;let i =index">
          <mat-list-item>
            <div class="time-slot">
              <span class="hour">{{ slot.hour }}</span>
              <div class="events">
                <!--                <div *ngFor="let event of eventService.getEventsForHour(selectedDate, i)" class="event" cdkDrag [cdkDragData]="event" cdkDragLockAxis="y">-->
                <!--                  <span>{{ event.title }}</span>-->
                <!--                  <p>{{ event.description }}</p>-->
                <!--                </div>-->
              </div>
            </div>
          </mat-list-item>

          <mat-divider></mat-divider>
        </ng-container>
        <div *ngFor="let event of eventService.getEventsForDay(selectedDate)" class="event" cdkDrag
             [ngStyle]="{
       'height': getEventHeight(event) + 'px',
       'top': getEventTop(event) + '%',
       'position': 'absolute',
       'right': '0',
       'width': '94%'
     }"
             [cdkDragData]="event" cdkDragLockAxis="y"  >
          <span>{{ event.title }}</span>
          <p>{{ event.description }}</p>
        </div>
      </mat-list>
    </div>
  </ng-container>
  <ng-container *ngIf="view==='month'">
    <div style="flex:8;display: flex;flex-wrap: wrap;" cdkDropListGroup>
      <div *ngFor="let day of monthDays;let i=index" [ngClass]="{'today': isToday(day)}"
           [cdkDropListConnectedTo]="connectedLists"
           style="width: 150px; height: 150px; ;box-sizing: border-box; border: 1px solid #ccc;" cdkDropList
           (cdkDropListDropped)="onDrop($event, day)"
           [cdkDropListData]="day.date">
        <div *ngIf="day" class="day-card">
          <div>
            <strong>{{ day.date.getDate() }}</strong>
            <div class="event" *ngFor="let event of eventService.getEventsForDay(day.date)" cdkDrag
                 [cdkDragData]="event">
              {{ event.title }}
            </div>
          </div>
        </div>
      </div>
    </div>

  </ng-container>
</div>
